(function(d,f){var b,a,c,e;b=function(g){return new b.fn.init(g)};b.fn=b.prototype={constructor:b,init:function(h){var j,g,l=this;c=this;l.vertexs=[];l.originalStyle={};for(j in h){l[j]=h[j]}l.btnElement.addEventListener("click",function(){var k=l.inputElement.value;var i=l.soCell(k);l.cellDelHighlighter();l.info();l.cellAddHighlighter(i)});l.clearElement.addEventListener("click",function(){l.cellDelHighlighter();l.info();l.inputElement.value=""});l.pathElement.addEventListener("click",function(){var o=l.fromElement.value,n=l.targetElement.value,i,k,m;k=l.soCell(o).vertex[0];m=l.soCell(n).vertex[0];l.cellDelHighlighter();i=l.soPath(k,m);l.info(i);l.cellAddHighlighter(i)})}};b.fn.init.prototype=b.fn;b.fn.VERSION=1;(function(){var g="strokeWidth=2;strokeColor=#FFFF00;";var i="strokeColor=#FFFF00;strokeWidth=2;fillColor=none;";var h=function(m,j,l,k){if(k!==""&&k.charAt(k.length-1)!==";"){k+=";"}k=l;m.setCellStyle(k,[j])};b.fn.cellAddHighlighter=function(p){var u=this,r,l,t,j,q,s;u.graph.getModel().beginUpdate();try{for(r=0,l=p.vertex.length;r<l;r++){u.vertexs.push(u.graph.insertVertex(u.graph.getDefaultParent(),null,"",p.vertex[r].geometry.x,p.vertex[r].geometry.y,p.vertex[r].geometry.width,p.vertex[r].geometry.height,i))}for(t=0,j=p.edge.length;t<j;t++){s=p.edge[t];if(typeof u.originalStyle[s.id]==="undefined"){u.originalStyle[s.id]=typeof s.getStyle()==="undefined"?"":s.getStyle()}h(u.graph,s,i,u.originalStyle[s.id])}}finally{u.graph.getModel().endUpdate()}return u}})();(function(){b.fn.cellDelHighlighter=function(){var m=this,j,g,h,l=[];m.graph.getModel().beginUpdate();try{while(m.vertexs.length>=1){l.push(m.vertexs.pop())}m.graph.removeCells(l)}finally{m.graph.getModel().endUpdate()}m.graph.getModel().beginUpdate();try{h=m.graph.getChildCells();for(j=0,g=h.length;j<g;j++){if(typeof m.originalStyle[h[j].id]==="string"){m.graph.setCellStyle(m.originalStyle[h[j].id],[h[j]])}}}finally{m.graph.getModel().endUpdate()}return m}})();(function(){b.fn.extend=function(h){var g;for(g in h){this[g]=h[g]}}})();(function(){var l="desagasdfljaslfjeljalsdjf",t="<br />",r="<hr />",g=["javascript","void(0)"].join(":"),n=["position:absolute","background:#999","color:#FFF","text-align:center","line-height:20px","top:10px","right:10px","text-decoration:none","font-family:Arial","width:20px","height:20px","display:block"],s=["position:absolute","background:#999","color:#FFF","text-align:center","line-height:20px","top:10px","right:35px","text-decoration:none","font-family:Arial","width:20px","height:20px","display:block"],k=["position:absolute","border:2px solid #ccc","background:#F5F5F5","top:10px","right:10px","width:300px","padding:10px","font-size:14px","line-height:200%","cursor:move","opacity: 0.8","overflow:hidden","display:block"];var h=function(u){var v,w;v=u.getElementsByTagName("div");for(w=0;w<v.length;w++){if(v[w].id===l){return v[w]}}return null};var j=function(v){var w,u;w=h(v);if(w){q(v)}w=document.createElement("div");w.id=l;w.style.cssText=k.join(";");v.appendChild(w);return w};var p=function(v){var u;u=document.createElement("a");u.href=g;u.innerHTML="X";u.title="Close the dialog";u.style.cssText=n.join(";");u.addEventListener("mouseover",function(){this.style.fontWeight="bold"});u.addEventListener("mouseout",function(){this.style.fontWeight="normal"});u.addEventListener("click",function(){v.remove()});v.appendChild(u)};var i=function(u,x){var w={};x.addEventListener("mousedown",function(y){y=y||d.event;w.x=y.clientX-$(this).offset().left;w.y=y.clientY-$(this).offset().top;u.addEventListener("mousemove",v)});x.addEventListener("mouseup",function(y){u.removeEventListener("mousemove",v)});var v=function(B){var A,E,D,C,z=[];B=B||d.event;A=B.clientX-$(this).offset().left;E=B.clientY-$(this).offset().top;D=m(A-w.x,0,$(u).width()-$(x).outerWidth());C=m(E-w.y,0,$(u).height()-$(x).outerHeight());x.style.left=D+"px";x.style.top=C+"px"}};var m=function(v,w,u){if(v>u){v=u}else{if(v<w){v=w}}return v};var o=function(w,v){var u,y,x;v=v||25;x=$(w).outerHeight();y=$(w).height();u=document.createElement("a");u.href=g;u.innerHTML="-";u.title="Fold the dialog";u.style.cssText=s.join(";");u.addEventListener("mouseover",function(){this.style.fontWeight="bold"});u.addEventListener("mouseout",function(){this.style.fontWeight="normal"});u.addEventListener("click",function(){var z,B,A;if($(w).height()===v){this.innerHTML="-";z=$(w).parent();B=$(w).position();A=m(B.top,0,z.height()-x);w.style.top=A+"px";$(w).height(y)}else{this.innerHTML="+";$(w).height(v);z=$(w).parent();B=$(w).position();if(B.top===z.height()-x){A=z.height()-$(w).outerHeight();w.style.top=A+"px"}}});w.appendChild(u)};var q=function(u){var v;v=h(u);if(v){v.remove()}};b.fn.info=function(y){var A=this,x,w,u,z=[],v=[];if(typeof y==="undefined"||y.vertex.length===0){q(A.graph.container);return false}x=j(A.graph.container);v.push(A.msg.S1);v.push(y.vertex[0].value);v.push(A.msg.S2);v.push(y.vertex[y.vertex.length-1].value);z.push(v.join("  "));z.push(r);for(w=0,u=y.vertex.length-1;w<u;w++){v=[];v.push(A.msg.F1(w+1));v.push(A.msg.S1);v.push(y.vertex[w].value);v.push(A.msg.S3);v.push(y.edge[w].value);v.push(A.msg.S4);v.push(y.vertex[w+1].value);z.push(v.join("  "))}x.innerHTML=z.join(t);p(x);i(A.graph.container,x);o(x)}})();(function(){var g={str:["a","b","c","d","e","f","g","h","i","j","k","l","m","o","p","q","r","s","t","x","u","v","y","z","w","n","0","1","2","3","4","5","6","7","8","9"],randint:function(k,h){var j=h-k+1;var i=Math.random()*j+k;return Math.floor(i)},randStr:function(){var j=this;var h=j.str.length-1;var i=j.randint(0,h);return j.str[i]},create:function(h){var n=this;var j=h||10;var m="";for(var k=0;k<j;k++){m+=n.randStr()}return m}};b.fn.key=function(h){if(typeof h!=="number"||h<1){h=32}return g.create(h)}})();(function(){b.fn.msg={S1:"FROM:",S2:"TARGET:",S3:"BY:",S4:"TO:",S5:"Close the dialog",F1:function(g){return"( "+g+" )"}}})();(function(){b.fn.soCell=function(o){var q=this,h={vertex:[],edge:[]},l,j,p,g;cells=q.graph.getChildVertices();for(l=0,j=cells.length;l<j;l++){if(cells[l].value===o){h.vertex.push(cells[l]);if(cells[l].edges.length>=1){for(p=0,g=cells[l].edges.length;p<g;p++){h.edge.push(cells[l].edges[p])}}}}return h}})();(function(){var i=function(o,l){var n,m;for(n=0,m=l.length;n<m;n++){if(l[n].id===o){return true}}return false};var h=function(u,v){var r,q,l,o,t=[],p,s=[];if(u&&v.edge.length>=1){for(r=0;r<v.edge.length;r++){s.push(v.edge[r])}for(r=0;r<v.vertex[0].edges.length;r++){s.push(v.vertex[0].edges[r])}for(r=0;r<u.length;r++){p=false;for(l=0;l<s.length;l++){if(u[r].id===s[l].id){p=true}}if(!p){t.push(u[r])}}}else{t=u}return t};var j=function(v){var u,r,q,o,p,s=[],t,l;if(v.length===0){u={vertex:[],edge:[]}}else{for(r=0,q=v.length;r<q;r++){t=v[r].vertex;l=0;for(o=0,p=t.length-1;o<p;o++){l+=g({x:t[o].geometry.x,y:t[o].geometry.y},{x:t[o+1].geometry.x,y:t[o+1].geometry.y})}v[r].length=l;s.push(l)}s.sort(function(n,m){if(n>m){return 1}else{return -1}});for(r=0,q=v.length;r<q;r++){if(v[r].length<=s[0]){u=v[r];break}}}return u};var g=function(l,n){var k,m;k=Math.abs(l.y-n.y);m=Math.abs(l.x-n.x);return Math.sqrt(m*m+k*k)};b.fn.soPath=function(s,p){var r=this,l={vertex:[],edge:[]},o=[],n,m;if(typeof s==="undefined"||typeof p==="undefined"){return l}var q=function(t){var A,w,u,v,E,x,D,C=false,B=[],z=-1;if(t.id===p.id){var y={vertex:[],edge:[]};for(u=0;u<l.vertex.length;u++){y.vertex.push(l.vertex[u])}for(u=0;u<l.edge.length;u++){y.edge.push(l.edge[u])}o.push(y);l.vertex.pop();l.edge.pop();for(u=l.vertex.length-1;u>=0;u--){if(l.vertex[u].fork>1){l.vertex.splice(u+1)}l.edge.pop()}D=true}else{x=h(t.edges,l);t.fork=x.length;if(x.length>=1){for(A=0,w=x.length;A<w;A++){if(x[A].source.id===t.id){B.push({vertex:x[A].target,edge:x[A]})}else{B.push({vertex:x[A].source,edge:x[A]})}if(B.length>=1&&B[B.length-1].vertex.id===p.id){B=[B.pop()];break}}for(A=0;A<B.length;A++){l.vertex.push(B[A].vertex);l.edge.push(B[A].edge);D=q(B[A].vertex);if(!D){l.vertex.pop();l.edge.pop()}else{C=true}}D=C}else{D=false}}return D};l.vertex.push(s);q(s);return j(o)}})();d.Search=b})(window);